"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[7704],{69843:(e,t,n)=>{n.r(t),n.d(t,{default:()=>bt});var r=n(67294),a=n(94184),l=n.n(a),i=n(73526),c=n(96206),o=n(70369),u=n(6158),s=n(13983),m=n(15852),f=n(87577),d=n(49207),v=n(28638),E=n(62572),g=function(){return(0,f.W6)(d.Jw)===d.pF.ONHOME?r.createElement(v.w,null,r.createElement(E.M,{onSearch:!1})):null},h=n(81993),p=n(29393),y=(n(21249),n(92222),n(38470)),S=n(86868),b=n(87462),C=n(45987),k=n(29439),N=(n(79753),n(50114)),P=n(48817),T=n(27937),I=n(86706),x=n(24697),_=n(98197),w=n(86604),O=n(8716);const B="pdLDCowVOiUIfeu9hihi",Z="yuNKB15IIjFkFJbXil2H",A="zjhp3VC76BipaXjVHuGx",D="x-carousel-carousel",L="x-carousel-button";var U=function(e){var t=e.scrollNode,n=(0,r.useState)((function(){return H(t)})),a=(0,k.Z)(n,2),l=a[0],i=a[1],o=(0,I.v9)((function(e){var t,n;return null!==(t=e.ui)&&void 0!==t&&null!==(n=t.textDirection)&&void 0!==n&&n.isRTL?"rtl":"ltr"})),u=(0,x.y1)((function(){return i(H(t))}),50);return(0,r.useEffect)((function(){var e=t.current;return null==e||e.addEventListener("scroll",u),function(){null==e||e.removeEventListener("scroll",u)}}),[u,t]),r.createElement(r.Fragment,null,r.createElement(O.E,{disabled:!l.canScrollLeft,size:"sm",onClick:function(){return M(t,"left",o)},icon:_.e,ariaLabel:c.ag.get("carousel.left"),tabIndex:-1,className:L}),r.createElement(O.E,{disabled:!l.canScrollRight,size:"sm",onClick:function(){return M(t,"right",o)},icon:w.V,ariaLabel:c.ag.get("carousel.right"),tabIndex:-1,className:L}))};function M(e,t,n){var r,a="left"===t?-1:1;"rtl"===n&&(a*=-1),null===(r=e.current)||void 0===r||r.scrollBy({top:0,left:a})}function H(e){var t=!1,n=!1;if(e.current){var r=e.current,a=r.scrollLeft,l=r.offsetWidth,i=r.scrollWidth,c=Math.abs(a);t=c>0,n=c+l<i}return{canScrollLeft:t,canScrollRight:n}}var R=n(13218),F=n(36522),j=r.memo((function(e){var t=e.children,n=e.title,a=e.seeAllUri,i=e.pageId,c=e.total,o=e.onClickShelfTitle,u=e.onClickShelfSeeAll,s=e.elementRef,m=(0,r.useRef)(null),f=(0,r.useState)(0),d=(0,k.Z)(f,2),v=d[0],E=d[1],g=(0,r.useCallback)((function(e){return e>0?t:null}),[t]),h=(0,r.useCallback)((function(e){var t=e.columnCount;E(t)}),[]);if(!Array.isArray(t)||0===t.length)return null;var p=c>t.length,y=t.length>v&&v>0,S={"--carousel-number-of-items":t.length};return r.createElement("section",{ref:s,style:S,className:F.Z.shelf,"aria-label":n},r.createElement("div",{className:l()(F.Z.header,Z)},r.createElement(R.r,{title:n,seeAllUri:a,pageId:i,hasMoreElements:p,onClickTitle:o,onClickSeeAll:u,className:A}),y&&r.createElement("div",{className:D},r.createElement(U,{scrollNode:m}))),r.createElement(P.T,{className:l()(F.Z.shelfGrid,B),render:g,onLayoutChange:h,ref:m}))}));j.displayName="BaseCarouselShelf";var W=(0,N.P)(j,(function(){return null}),(function(e){return(0,T.vK)(e,"Carousel")}));W.displayName="Carousel";var z=n(98624),G=["index","id"],q=function(e){var t=e.index,n=e.id,a=(0,C.Z)(e,G),l=a.seeAllUri,i=(0,z.e)({seeAllUri:l,index:t,id:n}),c=i.onClickShelfTitle,o=i.onClickShelfSeeAll,u=i.elementRef,s=i.UBIWrapper;return r.createElement(s,null,r.createElement(W,(0,b.Z)({},a,{onClickShelfTitle:c,onClickShelfSeeAll:o,elementRef:u})))},J=n(18686),V=n(30343),K=function(e){var t,n,a=e.spec,l=e.section,i=e.index,c=(0,f.W6)(d.ty,{loadingValue:!1})?q:J.q;return r.createElement(m.Nh,{spec:a.shelvesFactory()},r.createElement(c,{total:l.sectionItems.totalCount,seeAllUri:l.uri,pageId:l.uri,title:null!==(t=null===(n=l.data.title)||void 0===n?void 0:n.text)&&void 0!==t?t:"",index:i,id:l.uri},l.sectionItems.items.map(V.x)))},X=n(56607),Y=function(e){var t,n,a=e.spec,l=e.section,i=e.index;return r.createElement(m.Nh,{spec:a.shelvesFactory()},r.createElement(X.default,{title:null!==(t=null===(n=l.data.title)||void 0===n?void 0:n.text)&&void 0!==t?t:void 0,showAll:!1,index:i}))},Q=n(71002),$=(n(68309),n(57327),n(41539),n(69559)),ee=n(42781),te=n(4236),ne=n(70296),re=(n(83710),n(69518)),ae=n.n(re),le=n(24524),ie=n(86250),ce=n(39278),oe=n(61251),ue=n(18261),se=n(4232),me=n(80507),fe=n(25988),de=n(35410),ve=n(86514),Ee=n(97081),ge=n(20006),he=n(26482),pe=n(19986),ye=n(52759),Se=n(69691);const be="view-homeShortcutsGrid-shortcuts",Ce="view-homeShortcutsGrid-grid",ke="view-homeShortcutsGrid-shortcutLink",Ne="view-homeShortcutsGrid-shortcut",Pe="view-homeShortcutsGrid-draggable",Te="view-homeShortcutsGrid-imageContainer",Ie="view-homeShortcutsGrid-imageWrapper",xe="view-homeShortcutsGrid-image",_e="CKxS_0I5yf3i15WAjzvE",we="view-homeShortcutsGrid-main",Oe="view-homeShortcutsGrid-nameWrapper",Be="view-homeShortcutsGrid-name",Ze="EzRmGRncgnv1zFgF4dqE",Ae="bPmmKmSPLKMhtJSaUJRX",De="vpQWUBWS_lXRLZMRJT7w",Le="GSv7K805J9Jw7LB9tn2A",Ue="view-homeShortcutsGrid-PlayButtonContainer",Me="s9c9x_mJq197U2hBzGtV";var He=r.memo((function(e){var t,n,a,l=e.item,i=(0,pe._)(l.uri),c=null!==(t=l.duration_ms)&&void 0!==t?t:0,o=(0,Se.$o)(l.uri),u=o.isPlaying,s=o.isActive,m=(0,ye.z)(1e4,(function(e){var t;return(null===(t=e.item)||void 0===t?void 0:t.uri)===l.uri})),f=(0,k.Z)(m,1)[0],d=null!==(n=null===(a=l.resume_point)||void 0===a?void 0:a.resume_position_ms)&&void 0!==n?n:0,v=u||s?f:d,E=Math.round(100/(c/v)),g=i===he.Om.YES,h=c&&v>0;return g||h?r.createElement("div",{className:De},g?r.createElement(Ee.E,{iconSize:16,semanticColor:"textSubdued"}):null,h?r.createElement(ge.k,{className:Le,value:E,semanticColor:"essentialBase"}):null):null})),Re=n(4942),Fe=n(51615),je=n(32667),We=n(43864),ze=n(82627),Ge=n(91355),qe=n(84242),Je=n(57784),Ve=n(56802),Ke=n(67892),Xe=n(89104),Ye=n(49961),Qe=r.memo((function(e){var t=e.images,n=void 0===t?[]:t,a=e.fallbackIcon,l=void 0===a?le.U:a,i=(0,Ye.X)(n),c=null!=i&&i.url?Ie:_e;return r.createElement("div",{className:Te},r.createElement("div",{className:c},r.createElement(Xe.E,{className:xe,src:null==i?void 0:i.url,loading:"lazy",testid:"shortcut-image"},r.createElement(l,{"aria-hidden":!0}))))})),$e=r.memo((function(e){var t,n,a=e.index,i=e.item,c=e.fallbackIcon,o=e.showPlayButton,u=e.extraContent,s=e.onContextMenu,f=void 0===s?function(){}:s,d=e.onTouchStart,v=void 0===d?function(){}:d,E=e.onTouchEnd,g=void 0===E?function(){}:E,h=(0,Fe.k6)(),p=(0,Ve.o)(),y=(0,ne.WQ)(),S=y.setColorFromUri,b=y.resetColor,C=y.clearColor,k=(0,Ge.G3)(i.uri,i.release_date,null===(t=i.resume_point)||void 0===t?void 0:t.resume_position_ms,null===(n=i.resume_point)||void 0===n?void 0:n.fully_played),N=(0,m.fU)(We.createDesktopShortcutsPlayNavCardEventFactory,{data:{position:a,uri:i.uri}}),P=N.spec,T=N.logger,I=(0,qe.n)({uri:i.uri},{featureIdentifier:"home",referrerIdentifier:"home"}),x=I.isPlaying,_=I.isActive,w=I.togglePlay;var O=(0,r.useCallback)((function(){p({targetUri:i.uri,intent:"navigate",type:"click"});var e=P.hitUiNavigate({destination:i.uri});T.logInteraction(e),h.push(ae().from(i.uri).toURLPath(!0))}),[h,i.uri,T,p,P]),B=(0,r.useCallback)((function(){S(i.uri)}),[i.uri,S]);(0,r.useEffect)((function(){return function(){C()}}),[C]);var Z=(0,m.Wi)(P),A=(0,Je.O1)([i.uri],i.name);return r.createElement("div",{ref:Z,className:Ne,onContextMenu:f,onTouchStart:v,onTouchEnd:g,onMouseEnter:B,onMouseLeave:b},r.createElement("div",{className:Pe,onDragStart:A},r.createElement(Qe,{images:i.images,fallbackIcon:c}),r.createElement("div",{className:we},r.createElement("div",{className:Oe},r.createElement("div",{className:Be},k&&r.createElement(Ge.Rd,{className:Ae}),r.createElement(Ke.r,{to:i.uri,onClick:O,title:i.name},r.createElement(je.D,{as:"p",variant:"balladBold",className:Ze},i.name))),u||null),o&&r.createElement("div",{className:l()(Ue,(0,Re.Z)({},Me,x))},r.createElement(ze.f,{isPlaying:x,onClick:function(){p({targetUri:i.uri,intent:x?"pause":"play",type:"click"});var e,t=P.playButtonFactory();e=x?t.hitPause({itemToBePaused:i.uri}):_?t.hitResume({itemToBeResumed:i.uri}):t.hitPlay({itemToBePlayed:i.uri});var n=T.logInteraction(e);w({loggingParams:n})}}))),r.createElement("div",{onClick:O,className:ke})))})),et=r.memo((function(e){return ae().isCollection(e.item.uri)?r.createElement($e,(0,b.Z)({},e,{fallbackIcon:le.U})):r.createElement(ue._,{menu:r.createElement(de.X,{uri:e.item.uri})},r.createElement($e,(0,b.Z)({},e,{fallbackIcon:le.U})))})),tt=r.memo((function(e){return r.createElement(ue._,{menu:r.createElement(se.Y,{uri:e.item.uri})},r.createElement($e,(0,b.Z)({},e,{fallbackIcon:ie.c})))})),nt=r.memo((function(e){return r.createElement(ue._,{menu:r.createElement(me.m,{uri:e.item.uri})},r.createElement($e,(0,b.Z)({},e,{fallbackIcon:ce.a})))})),rt=r.memo((function(e){return r.createElement(ue._,{menu:r.createElement(ve.M,{uri:e.item.uri})},r.createElement($e,(0,b.Z)({},e,{fallbackIcon:oe.J,showPlayButton:!1})))})),at=r.memo((function(e){return r.createElement(ue._,{menu:r.createElement(fe.k,{uri:e.item.uri})},r.createElement($e,(0,b.Z)({},e,{fallbackIcon:oe.J,extraContent:r.createElement(He,e)})))}));n(47941),n(82526),n(38880),n(89554),n(54747),n(49337),n(33321),n(69070);var lt=n(11436),it=n(49068);const ct="J6UEDIqMSJhYlwGoeUZB",ot="ZjFf4lVC48DSryAjP9qB";function ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function st(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(n),!0).forEach((function(t){(0,Re.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mt=r.memo((function(e){var t=(0,it.x)(),n=st(st({},e.item),t);return r.createElement($e,(0,b.Z)({},e,{item:n,fallbackIcon:function(){return r.createElement("div",{className:ct},r.createElement(lt.P,{iconSize:32,className:ot}))}}))})),ft=270,dt=r.memo((function(e){var t,n,a=e.title,l=e.tagline,i=e.items,o=(0,ne.WQ)().fetchMultipleColors,u=(0,r.useState)({minWidth:ft,itemHeight:80,showPlayButton:!0}),s=(0,k.Z)(u,2),m=s[0],f=s[1],d=!(0,te.k)(),v=(0,r.useRef)(null),E=null!=a?a:(t=(new Date).getHours(),n=c.ag.get("home.evening"),t>=5&&t<12?n=c.ag.get("home.morning"):t>=12&&t<18&&(n=c.ag.get("home.afternoon")),n),g=(0,r.useCallback)((function(){if(v.current){var e=v.current.offsetWidth,t=e<600?200:ft,n=Math.min(Math.floor((e+24)/(t+24)),3);f({minWidth:t,showPlayButton:(e-24*(n-1))/n>=ft,itemHeight:e>=858?80:64})}}),[]);if((0,$.a)((function(){g()})),(0,r.useEffect)((function(){g()}),[g]),(0,r.useEffect)((function(){var e=(null==i?void 0:i.map(ne.lh))||[];o(e)}),[i,o]),d||null==i||!i.length)return null;var h=64===m.itemHeight?12:16;return r.createElement("section",{className:be,"aria-label":E,ref:v},r.createElement(R.r,{title:E,titleVariant:"alto",tagline:l}),r.createElement("div",{className:Ce,style:{"--min-column-width":"".concat(m.minWidth,"px"),"--column-gap":"".concat(24,"px"),"--row-gap":"".concat(h,"px"),"--item-height":"".concat(m.itemHeight,"px")}},i.filter((function(e,t){return t<6})).map((function(e,t){if(function(e){if(null!==e&&"object"===(0,Q.Z)(e)){var t=e,n=t.type,r=t.name;return n===ee.p.YOUR_EPISODES&&"string"==typeof r}return!1}(e))return r.createElement(mt,{index:t,key:"".concat(t,"-").concat(e.uri),item:e,showPlayButton:m.showPlayButton,shouldSetBackgroundColor:0===t});var n=function(e){var t=(ae().from(e)||{}).type;switch(t){case ae().Type.ARTIST:return nt;case ae().Type.ALBUM:case ae().Type.COLLECTION_ALBUM:return tt;case ae().Type.PLAYLIST:case ae().Type.PLAYLIST_V2:return et;case ae().Type.SHOW:return rt;case ae().Type.EPISODE:return at;case ae().Type.COLLECTION:return et;default:return console.warn("Unable to resolve entity shortcut from ".concat(e,' of type "').concat(t||"unknown",'"')),rt}}(e.uri);return r.createElement(n,{index:t,key:"".concat(t,"-").concat(e.uri),item:e,showPlayButton:m.showPlayButton,shouldSetBackgroundColor:0===t})}))))})),vt=(0,N.P)(dt,(function(){return null}),(function(e){return(0,T.vK)(e,"HomeShortcutsGrid")})),Et=n(28791),gt=function(e){var t=e.spec,n=e.greeting,a=e.section;return r.createElement(m.Nh,{spec:t.shortcutsFactory()},r.createElement(vt,{items:a.sectionItems.items.map(Et.lh),title:null!=n?n:void 0}))},ht=function(e){var t,n=e.spec,a=e.greeting,l=e.section,i=e.index;switch(null===(t=l.data)||void 0===t?void 0:t.__typename){case"HomeGenericSectionData":return r.createElement(K,{spec:n,section:(0,S.f)(l,l.data),index:i});case"HomeShortsSectionData":return r.createElement(gt,{spec:n,greeting:a,section:(0,S.f)(l,l.data)});case"HomeRecentlyPlayedSectionData":return r.createElement(Y,{spec:n,section:(0,S.f)(l,l.data),index:i});case"HomeFeedBaselineSectionData":case"HomeNativeAdsSectionData":case"HomeOnboardingSectionData":case null:case void 0:return null;default:return(0,y._)(l.data),null}},pt=function(e){var t=e.spec,n=e.greeting,a=e.container;return r.createElement(r.Fragment,null,a.sections.items.map((function(e,a){return r.createElement(ht,{key:"".concat(a,"-").concat(e.uri),spec:t,greeting:n,section:e,index:a})})))},yt=n(76728),St=function(e){var t,n,a=e.spec;(0,s.z)("home");var i=(0,h.b3)({timeZone:(0,p.L7)()},{cacheTime:p.us,staleTime:p.fS}),o=i.data,m=i.error;if(i.loading||null!==m)return r.createElement(u.h,{hasError:null!==m,errorMessage:c.ag.get("error.generic")});var f=null==o?void 0:o.home;return"HomeResponsePayload"!==(null==f?void 0:f.__typename)||0===f.sectionContainer.sections.totalCount||0===f.sectionContainer.sections.items.length?r.createElement(u.h,{hasError:!0,errorMessage:c.ag.get("error.generic")}):r.createElement("section",{"data-testid":"home-page"},r.createElement("div",{className:yt.Z.home},r.createElement("div",{className:l()(yt.Z.content,"contentSpacing")},r.createElement(pt,{spec:a,greeting:null!==(t=null===(n=f.greeting)||void 0===n?void 0:n.text)&&void 0!==t?t:null,container:f.sectionContainer}))))};const bt=function(){var e=(0,m.fU)(i.createDesktopHomeEventFactory,{data:{identifier:"home",uri:"spotify:home"}}).spec;return r.createElement(m.Nh,{spec:e},r.createElement(o.$,null,c.ag.get("page.generic-title")),r.createElement(r.Suspense,{fallback:null},r.createElement(g,null)),r.createElement(St,{spec:e}))}}}]);
//# sourceMappingURL=home-v2.js.map